<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>JSDoc: Source: main/home/home.script.js</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link
      type="text/css"
      rel="stylesheet"
      href="styles/prettify-tomorrow.css"
    />
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css" />
  </head>

  <body>
    <div id="main">
      <h1 class="page-title">Source: main/home/home.script.js</h1>

      <section>
        <article>
          <pre
            class="prettyprint source linenums"
          ><code>import { entryEntity } from '../../core/entry.entity.js';
import { route } from '../app-routing.js';

window.addEventListener('homePageLoaded', () => {
  // On Load work
  getAllEntries();

  // Event handlers
  addEntryEvent();
});

/**
 * Gets all entries from localStorage and displays them on the home page.
 */
function getAllEntries() {
  const existingEntries = Object.values(entryEntity.getAllEntries());
  existingEntries.forEach((entry) => {
    createEntryItem(entry);
  });
}

/**
 * Creates a new entry entity and displays the saved entry on the home page.
 */
function addEntryEvent() {
  const newEntryButton = document.querySelector('new-entry-button');
  newEntryButton.addEventListener('addNewEntry', () => {
    const newEntryEntity = entryEntity.createEntry();
    createEntryItem(newEntryEntity);
    const homePage = document.querySelector('home-page');
    route.routeToInputEntryPage(homePage, newEntryEntity);
  });
}

/**
 * Creates an entry-item-component and appends the component to the entry-list
 * @param {Entry} entry - the entry entity object to set to data of new entry item
 */
function createEntryItem(entry) {
  const entryItem = document.createElement('entry-item-component');
  const entryList = document.querySelector('#entry-list');
  entryItem.setAttribute('data', JSON.stringify(entry));
  entryItem.addEventListener('deleteEntry', () => {
    if (!!entry) {
      entryEntity.deleteEntry(entry.__id);
      entryItem.remove();
    } else {
      console.error(`ERROR: entity data object of this entry does not exist!`);
    }
  });

  // Adds Navigation from entry item to viewpage
  entryItem.addEventListener('viewEntry', () => {
    const homePage = document.querySelector('home-page');
    route.routeToViewEntryPage(homePage, entry);
  });

  entryList.appendChild(entryItem);
}
</code></pre>
        </article>
      </section>
    </div>

    <nav>
      <h2><a href="index.html">Home</a></h2>
      <h3>Classes</h3>
      <ul>
        <li><a href="EntryItem.html">EntryItem</a></li>
        <li><a href="InputEntry.html">InputEntry</a></li>
        <li><a href="ViewEntry.html">ViewEntry</a></li>
      </ul>
      <h3>Global</h3>
      <ul>
        <li><a href="global.html#addEntryEvent">addEntryEvent</a></li>
        <li><a href="global.html#createEntryItem">createEntryItem</a></li>
        <li><a href="global.html#dateHelper">dateHelper</a></li>
        <li><a href="global.html#entryEntity">entryEntity</a></li>
        <li><a href="global.html#getAllEntries">getAllEntries</a></li>
        <li><a href="global.html#route">route</a></li>
        <li><a href="global.html#updateEntryEvent">updateEntryEvent</a></li>
      </ul>
    </nav>

    <br class="clear" />

    <footer>
      Documentation generated by
      <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Thu Dec 08
      2022 05:27:57 GMT+0000 (Coordinated Universal Time)
    </footer>

    <script>
      prettyPrint();
    </script>
    <script src="scripts/linenumber.js"></script>
  </body>
</html>
